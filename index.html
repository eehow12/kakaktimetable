<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Grandma's Care Timetable</title>
<style>
  body {
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(to bottom right, #dce3e9, #b5c4d8);
    color: #333;
    margin: 0;
    padding: 0;
    text-align: center;
  }

  h1 {
    background: linear-gradient(90deg, #82b1ff, #64b5f6);
    color: white;
    padding: 20px;
    margin: 0;
    border-radius: 0 0 15px 15px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  }

  .week-info {
    margin: 15px auto;
    background: rgba(255, 255, 255, 0.5);
    border-radius: 10px;
    padding: 8px 15px;
    width: fit-content;
    font-weight: 500;
    border: 1px solid rgba(0,0,0,0.1);
    color: #333;
  }

  table {
    border-collapse: collapse;
    width: 95%;
    max-width: 800px;
    margin: 20px auto;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    background-color: white;
    border-radius: 15px;
    overflow: hidden;
  }

  th, td {
    border: 1px solid #ddd;
    padding: 12px;
    text-align: center;
    vertical-align: middle;
    position: relative;
  }

  th {
    background-color: #90caf9;
    color: #fff;
  }

  tr:nth-child(even) {
    background-color: #f2f7fb;
  }

  tr:nth-child(odd) {
    background-color: #fff;
  }

  td.emoji {
    font-size: 18px;
    background-repeat: no-repeat;
    background-position: center;
    background-size: 22px;
  }

  .today {
    background-color: #ffecf1 !important;
    border: 2px solid #ff7eb9 !important;
    position: relative;
  }

  .today::after {
    content: "üçì";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 20px;
  }

  .oncall-banner {
    font-size: 1.2rem;
    font-weight: 600;
    color: white;
    background: linear-gradient(90deg, #4fc3f7, #0288d1);
    padding: 12px 20px;
    border-radius: 12px;
    width: fit-content;
    margin: 20px auto;
    box-shadow: 0 3px 8px rgba(0,0,0,0.2);
    transition: all 0.3s ease;
  }

  .oncall-banner.b {
    background: linear-gradient(90deg, #81c784, #388e3c);
  }

  button {
    background-color: #64b5f6;
    color: white;
    border: none;
    padding: 10px 15px;
    margin: 10px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 500;
  }

  button:hover {
    background-color: #42a5f5;
  }

  @media (max-width: 600px) {
    table, th, td {
      font-size: 12px;
      padding: 6px;
    }
    h1 {
      font-size: 1.2rem;
    }
    .oncall-banner {
      font-size: 1rem;
      padding: 8px 10px;
    }
  }
</style>
</head>
<body>

<h1>Grandma's Care Timetable üëµ</h1>

<div id="oncallBanner" class="oncall-banner">Loading...</div>
<div id="weekInfo" class="week-info"></div>

<table id="timetable">
  <thead>
    <tr>
      <th>Hari</th>
      <th>Pagi‚Äì11am</th>
      <th>11am‚Äì2pm</th>
      <th>2pm‚Äì4pm</th>
      <th>4pm‚Äì6pm</th>
      <th>6pm‚ÄìMalam</th>
    </tr>
  </thead>
  <tbody id="scheduleBody"></tbody>
</table>

<button onclick="switchWeek('A')">Switch to Week A</button>
<button onclick="switchWeek('B')">Switch to Week B</button>

<script>
  const scheduleA = [
    ["Minggu", "Ririn", "Kusni", "Ririn", "Kusni", "Ririn"],
    ["Senin", "Kusni", "Ririn", "Kusni", "Ririn", "Kusni"],
    ["Selasa", "Ririn", "Kusni", "Ririn", "Kusni", "Ririn"],
    ["Rabu", "Kusni", "Ririn", "Kusni", "Ririn", "Kusni"],
    ["Kamis", "Ririn", "Kusni", "Ririn", "Kusni", "Ririn"],
    ["Jumat", "Kusni", "Ririn", "Kusni", "Ririn", "Kusni"],
    ["Sabtu", "Ririn", "Kusni", "Ririn", "Kusni", "Ririn"]
  ];

  const scheduleB = [
    ["Minggu", "Kusni", "Ririn", "Kusni", "Ririn", "Kusni"],
    ["Senin", "Ririn", "Kusni", "Ririn", "Kusni", "Ririn"],
    ["Selasa", "Kusni", "Ririn", "Kusni", "Ririn", "Kusni"],
    ["Rabu", "Ririn", "Kusni", "Ririn", "Kusni", "Ririn"],
    ["Kamis", "Kusni", "Ririn", "Kusni", "Ririn", "Kusni"],
    ["Jumat", "Ririn", "Kusni", "Ririn", "Kusni", "Ririn"],
    ["Sabtu", "Kusni", "Ririn", "Kusni", "Ririn", "Kusni"]
  ];

  const startOfWeekA = new Date(Date.UTC(2025, 9, 19, 0, 0, 0)); // 19 Oct 2025 UTC (Sunday)
  const timezoneOffset = 8 * 60 * 60 * 1000; // GMT+8 Malaysia
  const now = new Date(Date.now() + timezoneOffset);
  const today = new Date(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate());

  function getWeekType(date) {
    const diffWeeks = Math.floor((date - startOfWeekA) / (7 * 24 * 60 * 60 * 1000));
    return diffWeeks % 2 === 0 ? 'A' : 'B';
  }

  function generateTable(weekType) {
    const schedule = weekType === 'A' ? scheduleA : scheduleB;
    const tbody = document.getElementById('scheduleBody');
    tbody.innerHTML = '';

    const localToday = new Date(today);
    const dayOfWeek = (localToday.getDay() + 6) % 7; // Sunday=0, align properly for table

    schedule.forEach((row, index) => {
      const tr = document.createElement('tr');
      row.forEach((cell, colIndex) => {
        const td = document.createElement('td');
        td.textContent = cell;

        // Apply emoji backgrounds in pattern
        if (colIndex > 0) {
          td.classList.add('emoji');
          td.style.backgroundImage = (colIndex % 2 === 0)
            ? "url('https://em-content.zobj.net/source/noto-emoji-animations/344/kitchen-knife_1f52a.gif')"
            : "url('https://em-content.zobj.net/source/noto-emoji-animations/344/soap_1f9fc.gif')";
        }

        // Highlight today
        if (index === dayOfWeek) {
          td.classList.add('today');
        }

        tr.appendChild(td);
      });
      tbody.appendChild(tr);
    });
  }

  function updateInfo(weekType) {
    const banner = document.getElementById('oncallBanner');
    const info = document.getElementById('weekInfo');
    const weekStart = new Date(startOfWeekA.getTime() + timezoneOffset + 
                      (weekType === 'A' ? 0 : 7 * 24 * 60 * 60 * 1000));
    const weekEnd = new Date(weekStart.getTime() + 6 * 24 * 60 * 60 * 1000);
    const format = d => d.toLocaleDateString('id-ID', { day: 'numeric', month: 'short', year: 'numeric' });

    banner.textContent = weekType === 'A'
      ? "Week A ‚Äî Ririn is on-call (night shift)"
      : "Week B ‚Äî Kusni is on-call (night shift)";
    banner.className = `oncall-banner ${weekType.toLowerCase()}`;
    info.textContent = `${format(weekStart)} ‚Äî ${format(weekEnd)}`;
  }

  function switchWeek(weekType) {
    generateTable(weekType);
    updateInfo(weekType);
  }

  const currentWeek = getWeekType(today);
  generateTable(currentWeek);
  updateInfo(currentWeek);
</script>

</body>
</html>
